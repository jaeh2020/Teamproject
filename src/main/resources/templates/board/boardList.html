<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="@{layout/default}">

<th:block layout:fragment="customTitle">
	<title th:text="${title}"></title>
</th:block>

<!-- contents layout:fragment 정의 -->
<th:block layout:fragment="customContents">
	
	<div class="card card-outline-primary" >
	
		<div class="col-lg-12">
			<div class="box box-primary">
				<div class="card-header" >
					<h4 class="m-b-0 text-white" ><i class="ti-menu"></i> 소비자 게시판 목록  </h4>
				</div>
				<div class="box-body" style="padding-top: 20px;" >
					<table class="table table-bordered">
						<thead>
							<tr>
								<th style="width: 30px; font-style: italic; font-weight: bold;">NO.</th>
								<th style="font-weight: bold;">제목</th>
								<th style="width: 120px; font-weight: bold;">작성자 아이디</th>
								<th style="width: 150px;  font-weight: bold;">작성시간</th>
								<th style="width: 60px; font-weight: bold;">조회</th>
							</tr>
						</thead>
						<tbody id="boardListMore">
							<tr th:if="${boardList ne null and #lists.size(boardList) > 0}" th:each=" b : ${boardList}">
								<td th:text="${b.boardNum}"></td>
								<td th:text="${b.boardTitle}"></td>
								<td>
									<a href="javascript:void(0)" class="memberInfoSearch" th:text="${b.memberId}"></a>
								</td>
								<td th:text="${b.boardRegTime}"></td>
								<td th:text="${b.boardViews}"></td>
							</tr>
						</tbody>
					</table>
				</div>
				
								
				<div class="box-footer">
					<div class="pull-right">
						<a th:href="@{/boardWrite}" class="btn btn-success btn-flat"  style="margin-top: 15px;"><i class="fa fa-pencil"></i> 글쓰기</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</th:block>

<th:block layout:fragment="customJsLib">

	<script type="text/javascript">
	
		$(function(){
			$('.memberInfoSearch').click(function(){
				var getMemberId = $(this).text();
				console.log(getMemberId);
				var request = $.ajax({ 
					url: "/memberSearch", //요청 주소
					method: "POST", //요청 방식
					data: {memberId : getMemberId}, //전달할 파라미터 input name-> memberId, value -> getMemberId
					dataType: "json" // 받아올 포맷방식
				});
					
				request.done(function( data ) {
					
					var printHtml = '';
					
					printHtml += '회원아이디 : ' + data.memberId;
					printHtml += '<br>회원명 : ' + data.memberName;
					printHtml += '<br>회원나이 : ' + data.memberAge;
					console.log(data);
					Swal.fire(printHtml);
				  
				});
				//응답에 실패 혹은 에러 발생 시 실행  : 수정할 필요없음
				request.fail(function( jqXHR, textStatus ) {
				  alert( "Request failed: " + textStatus );
				});
			});
		});
	</script>
</th:block>




</html>