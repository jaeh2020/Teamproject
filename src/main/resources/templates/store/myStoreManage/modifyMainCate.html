<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/default}">

<th:block layout:fragment="customTitle">
	<title th:text="${title}"></title>
	
		<!-- css -->
<style type= "text/css">
	tbody tr td{
		color: #505050;
	}
	.btn-primary{
		display : block;
		float : right;
		color: #fff;
		margin: 5px;
	}
</style>

</th:block>


<!-- contents layout:fragment 정의 -->
<th:block layout:fragment="customContents">

	<div class="row justify-content-center">
		<div class="col-md-6">
			<div class="card card-outline-primary">
				<div class="card-title">
					<div class="card-header">
	                	<h4 class="m-b-0 text-white">대분류 수정하기</h4>
	                </div>
				</div>
				<form id="modifyMainCateForm" th:action="@{/store/myStoreManage/modifyMainCate}" method="post">
					<div class="card-body">
						<div class="basic-form">
								<div>
									<label> <span class="text-danger">*</span> 는 필수 항목입니다. </label>
								</div>
								<div>
									<label> 1. 첫번째 대분류는 필수선택항목입니다.  </label>
									<br>
									<label> 2. 만약 대분류를 한가지만 선택하고자 한다면	</label>
									<br>
									<label> 　대분류2 항목을 <span class="text-danger"> 미선택</span> 으로 선택하시면 됩니다.   </label>
								</div>
								<div class="form-group">
									<label>수정할 메뉴 대분류1 <span class="text-danger">*</span> </label>
										<th:block th:each="s : ${mainCateOnly}">
											<select class="form-control" id="selectMainCateCode" name="mainCateCode">
													<option>: : 미선택 : :</option>
						                        	<th:block th:each="m : ${mainCate}">
						                        	<option th:value="${m.mainCateCode}" 
						                        			th:selected="${#strings.toString(m.mainCateCode) == #strings.toString(s.foodMainCate.mainCateCode)}"> 
						                        			[[${m.mainCateName}]] 
						                        	</option>
						                        	</th:block>
					                        </select>
					                        <div class="form-group">
					              	 <!-- 히든영역 -->
									<input type="hidden" name="storeCode" class="form-control" th:value="${s.storeCode}" readonly="readonly">
									 <!-- 히든영역 -->
								</div>
				                        </th:block>
				                    <br>
									<label>수정할 메뉴 대분류2 </label>
				                        <th:block th:unless="${#lists.isEmpty(mainCateOnly2)}" th:each="f : ${mainCateOnly2}">
											<select class="form-control" id="selectMainCateCode" name="mainCateCode2">
													<option th:selected="${#strings.isEmpty(f.foodMainCate.mainCateCode)}"
															value="">: : 미선택 : :</option>
						                        	<th:block th:each="m : ${mainCate}">
						                        	<option th:value="${m.mainCateCode}" 
						                        			th:selected="${#strings.toString(m.mainCateCode) == #strings.toString(f.foodMainCate.mainCateCode)}"> 
						                        			[[${m.mainCateName}]] 
						                        	</option>
						                        	</th:block>
					                        </select>
				                        </th:block>
				                        <th:block th:if="${#lists.isEmpty(mainCateOnly2)}" th:each="s : ${mainCateOnly}">
											<select class="form-control" id="selectMainCateCode" name="mainCateCode2">
													<option selected="selected"
															value="">: : 미선택 : :</option>
						                        	<th:block th:each="m : ${mainCate}">
							                        	<option th:value="${m.mainCateCode}"> 
							                        			[[${m.mainCateName}]] 
							                        	</option>
						                        	</th:block>
					                        </select>
				                        </th:block>
								</div>
								<div class="form-group">
									<button type="submit" id="modifyMainCateBtn" class="btn btn-primary btn-flat m-b-10">대분류 수정</button>
								</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>

	
	
	
</th:block>					
					
<!--Custom JavaScript -->
<th:block layout:fragment="customJsLib">
	<script src="js/lib/owl-carousel/owl.carousel.min.js"></script>
    <script src="js/lib/owl-carousel/owl.carousel-init.js"></script>
    
    <script type="text/javascript">
    
   	/* 유효성검사 */ 
	$(function(){
			$('#modifyMainCateBtn').click(function(){
				
				var mainCateCode = $('[name=mainCateCode]');
				
				if(mainCateCode.val().trim() == 'main_zznull_cate'){
					alert('첫번째 대분류는 없음으로 선택할 수 없으며 필수사항입니다.');
					return false;
				}
				$('#modifyMainCateForm').submit();	
			});
		});
	</script>

</th:block>
</body>
</html>