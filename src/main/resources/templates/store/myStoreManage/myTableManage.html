<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/default}">

<th:block layout:fragment="customTitle">
	<title th:text="${title}"></title>


<style type= "text/css">
	tbody tr td{
		color: #505050;
	}
	.btn-primary{
		display : block;
		float : left;
		color: #fff;
		margin: 5px;
	}
</style>


</th:block>

<th:block layout:fragment="customJs">

	<script th:src="@{/js/lib/datatables/datatables.min.js}"></script>
    <script th:src="@{/js/lib/datatables/cdn.datatables.net/buttons/1.2.2/js/dataTables.buttons.min.js}"></script>
    <script th:src="@{/js/lib/datatables/cdn.datatables.net/buttons/1.2.2/js/buttons.flash.min.js}"></script>
    <script th:src="@{/js/lib/datatables/cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js}"></script>
    <script th:src="@{/js/lib/datatables/cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/pdfmake.min.js}"></script>
    <script th:src="@{/js/lib/datatables/cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/vfs_fonts.js}"></script>
    <script th:src="@{/js/lib/datatables/cdn.datatables.net/buttons/1.2.2/js/buttons.html5.min.js}"></script>
    <script th:src="@{/js/lib/datatables/cdn.datatables.net/buttons/1.2.2/js/buttons.print.min.js}"></script>
    <script th:src="@{/js/lib/datatables/datatables-init.js}"></script>
    
</th:block>

<!-- contents layout:fragment 정의 -->
<th:block layout:fragment="customContents">

	<div class="row justify-content-center">
		<div class="col-lg-6">
			<div class="card">
				<div class="row justify-content-center">
					<div class="form-inline">
						<a th:href="@{/store/myStoreManage/addMyTable}" class="addTableBtn btn btn-primary">테이블 등록(추가) </a>
						
					</div>
				</div>
				<div style="font-family: 'Gowun Batang', serif">
					<br>
					<span class="text-danger">* 오른쪽 Search기능을 이용하여 조회하고자 하는 매장명을 검색하세요. </span>
				</div>
				
				<table id="myTable" class="table table-bordered table-striped">
		                  <thead>
		                      <tr>
		                      	<th>매장 코드</th>
								<th>테이블 코드</th>
								<th>테이블 번호</th>
								<th data-orderable="false">테이블 삭제</th>
		                      </tr>
		                  </thead>
		                 <tbody>
		                 <tr th:each="t : ${tableList}">
						 <td th:text="${t.store.storeName}"></td>
						 <td th:text="${t.storeTableCode}"></td>
						 <td th:text="${t.tableNum}"></td>
						 <td>
							 <a th:href="@{/store/myStoreManage/deleteMyTable(storeTableCode=${t.storeTableCode})}">
							 <button type="button" id="deleteMyTableBtn" class="deleteMyTableBtn btn btn-danger btn-outline ti-trash text-white"></button>
							 </a>
						</td>
		  					</tr>
		 				</tbody>
		        </table>
			</div>
		</div>
	</div>

</th:block>					
					
<!--Custom JavaScript -->
<th:block layout:fragment="customJsLib">
	<script src="js/lib/owl-carousel/owl.carousel.min.js"></script>
    <script src="js/lib/owl-carousel/owl.carousel-init.js"></script>
    
    
    <script type="text/javascript">
    
 	/* 추가버튼, 삭제버튼 alert */
    $(function(){
      		$('#deleteMyTableBtn').click(function(){
      			
      			alert('정말로 삭제하시겠습니까?');
      			
				var deleteMyTableBtn = $(this);
				
				var tr = deleteMyTableBtn.parent().parent().parent();
				var td = tr.children();
				
				console.log(tr.text());
				
				var tbN = td.eq(2).text();
				/* 
				if(tbN > ){
					alert('테이블은 가장 마지막 번호만 삭제 가능합니다.');
					return false;
				} */
				
      		});
	});

    
	</script>
   
</th:block>
</body>
</html>