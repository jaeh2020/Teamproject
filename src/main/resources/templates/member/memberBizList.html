<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/default}">

<th:block layout:fragment="customTitle">
	<title th:text="${title}"></title>
	
<!-- css -->
<style type= "text/css">
	.btn{
		margin : 5px;
		color: #505050;
		float: left;
	}
	.topBtn{
		float: right;
	}
	.btn-success{
		padding-top : 6px;
		color: #fff;
	}
	ul a{
		display:block;
	}
	.all{
		color: #000;
	}
	#messageList{
		cursor: pointer;
	}
	.clicked {
        color: gold;
      }
</style>
</th:block>


<!-- contents layout:fragment 정의 -->
<th:block layout:fragment="customContents">

	
	<div class="row">

		<div class="col-lg-12 ">
			<div class="card card-outline-primary">
	            <div class="card-header">
	                <h4 class="m-b-0 text-white">회원 목록</h4>
	            </div>
	            <div class="card-body"  id="list">
	             <div class="table-responsive m-t-40">
                    <table id="myTable" class="table table-bordered table-striped">
                    	<thead>
                            <tr>
                                <th>코드</th>
                                <th>소상공인 아이디</th>
                                <th>사업자 번호</th>
                                <th>소상공인 확인서</th>
                                <th>승인자 아이디</th>
                                <th>승인 요청 일시</th>
                                <th>승인 상태</th>
                                <th>승인 완료 일시</th>
                            </tr>
                        </thead>
						<tbody th:id="memberBiz">
		                    <tr th:each="l : ${memberBizList}">
		                    	<td th:text="${l.bizCode}" th:id="${l.bizCode}" class="modi"></td>
		                    	<td th:text="${l.memberId}"></td> 
		                    	<td th:text="${l.bizNum}"></td> 
		                    	<td th:text="${l.bizFileAtt}"></td> 
		                    	<td th:text="${l.confirmId}"></td> 
		                    	<td th:text="${l.bizReTime}"></td> 
		                    	<td th:text="${l.statement.stateName}"></td> 
		                    	<td th:text="${l.bizCompTime}"></td>
		                    </tr>
	               		</tbody>
	            	</table>
					/////////////
					<form th:action="@{member/memberBizList}" method="post">
 							
						<div class="form-group">
		                    <label>승인자</label><span>*</span>
		                    <input type="text" class="form-control" id="confirmId" name="confirmId" th:value="${session.SID}">           
						</div>
	                        <div class="form-group">
	                             <label>승인상태</label><span>*</span>
	                             <input type="text" class="form-control" id="bizStatus" name="bizStatus" >
	                        </div>
	                           <div class="form-button" id="btn">
	                          	<a th:href="@{member/memberBizList(bizCode=${memberBiz.bizCode})}" class="btn btn-inverse btn-flat m-b-30 m-t-30">취소</a>
	                            <button type="submit" id="modi" class="btn btn-success btn-flat m-b-30 m-t-30">수정하기</button>
	                           </div>
                       </form>
					
	        	</div>
			</div>
		</div>
	</div>
</div>
</th:block>


<th:block layout:fragment="customJsLib">
	<script th:src="@{/js/lib/owl-carousel/owl.carousel.min.js}"></script>
    <script th:src="@{/js/lib/owl-carousel/owl.carousel-init.js}"></script>
	<script th:src="@{/js/lib/datatables/datatables.min.js}"></script>
    <script th:src="@{/js/lib/datatables/cdn.datatables.net/buttons/1.2.2/js/dataTables.buttons.min.js}"></script>
    <script th:src="@{/js/lib/datatables/cdn.datatables.net/buttons/1.2.2/js/buttons.flash.min.js}"></script>
    <script th:src="@{/js/lib/datatables/datatables-init.js}"></script>
	<script type="text/javascript">
		$(function(){
			/* $('.modi').on('click',function(){
				var bizCode = $(this).attr("id");
	            console.log(bizCode,'bizCode');
	            
	            var request = $.ajax({
	    			  url: "/modifyBizConfirm", //요청 주소
	    			  method: "GET", //요청 방식
	    			  data: {"bizCode" : bizCode}, //전달 할 파라미터
	    			  dataType: "html" //받아 올 포맷방식
  				});
	          	//응답이 완료 되었을 경우 실행
				request.done(function( data ) {
				  console.log(data,"data");
				  
				  var htmml= '';
					
					htmml += '<br><span class="ti-comments-smiley"></span> ' + '<text style="font-family: Jua, sans-serif; font-size:40px">' + '되나' + '</text>';
					htmml += '<br><br> <text class="text-info" style="font-family: Jua, sans-serif;"> 주소 : </text>' + '<text style="font-family: Jua, sans-serif;">' + '되나' + '</text>';
					htmml += '<br> <text class="text-info" style="font-family: Jua, sans-serif;"> 전화번호 : </text>' + '<text style="font-family: Jua, sans-serif;">' + '되나' + '</text>';
					htmml += '<br> <text class="text-info" style="font-family: Jua, sans-serif;"> 영업시간 : </text>' + '<text style="font-family: Jua, sans-serif;">' + '되나' + '</text>';
					htmml += '<br> <text class="text-danger" style="font-family: Jua, sans-serif;"> 휴일 : </text>' + '<text style="font-family: Jua, sans-serif;">' + '되나' + '</text>';
					htmml += '<br> <text class="text-warning" style="font-family: Jua, sans-serif;"> 현재 예약 가능 상태 : </text>' + '<text style="font-family: Jua, sans-serif;"> 가능  </text>';
									
					Swal.fire(htmml);
				});
				request.fail(function(request,status,error){
			        alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
			    });
			}); */
			
			$('.modi').on('click',function(){
				var bizCode = $(this).attr("id");
	            console.log(bizCode,'bizCode');
	            
				  var htmml= '';
					
					htmml += '<br><span class="ti-comments-smiley"></span> ' + '<text style="font-family: Jua, sans-serif; font-size:40px">' + '되나' + '</text>';
					htmml += '<br><br> <text class="text-info" style="font-family: Jua, sans-serif;"> 주소 : </text>' + '<text style="font-family: Jua, sans-serif;">' + '되나' + '</text>';
					htmml += '<br> <text class="text-info" style="font-family: Jua, sans-serif;"> 전화번호 : </text>' + '<text style="font-family: Jua, sans-serif;">' + '되나' + '</text>';
					htmml += '<br> <text class="text-info" style="font-family: Jua, sans-serif;"> 영업시간 : </text>' + '<text style="font-family: Jua, sans-serif;">' + '되나' + '</text>';
					htmml += '<br> <text class="text-danger" style="font-family: Jua, sans-serif;"> 휴일 : </text>' + '<text style="font-family: Jua, sans-serif;">' + '되나' + '</text>';
					htmml += '<br> <text class="text-warning" style="font-family: Jua, sans-serif;"> 현재 예약 가능 상태 : </text>' + '<text style="font-family: Jua, sans-serif;"> 가능  </text>';
									
					Swal.fire(htmml);
				});
		})
	</script>
</th:block>
</html>