<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/default}">

<th:block layout:fragment="customTitle">
	<title th:text="${title}"></title>
	
<!-- css -->
<style type= "text/css">
	.btn{
		margin : 5px;
		color: #505050;
		float: left;
	}
	.topBtn{
		float: right;
	}
	.btn-success{
		padding-top : 6px;
		color: #fff;
	}
	ul a{
		display:block;
	}
	.all{
		color: #000;
	}
	#messageList{
		cursor: pointer;
	}
	.clicked {
        color: gold;
      }
</style>
</th:block>


<!-- contents layout:fragment 정의 -->
<th:block layout:fragment="customContents">

	
	<div class="row">

		<div class="col-lg-12 ">
			<div class="card card-outline-primary">
	            <div class="card-header">
	                <h4 class="m-b-0 text-white">회원 목록</h4>
	            </div>
	            <div class="card-body"  id="list">
	             <div class="table-responsive m-t-40">
                    <table id="myTable" class="table table-bordered table-striped">
                    	<thead>
                            <tr>
                                <th>코드</th>
                                <th>소상공인 아이디</th>
                                <th>사업자 번호</th>
                                <th>소상공인 확인서</th>
                                <th>승인자 아이디</th>
                                <th>승인 요청 일시</th>
                                <th>승인 상태</th>
                                <th>승인 완료 일시</th>
                            </tr>
                        </thead>
						<tbody th:id="memberBiz">
		                    <tr th:each="l : ${memberBizList}">
		                    	<td th:text="${l.bizCode}" th:id="${l.bizCode}" class="modiSelect"></td>
		                    	<td th:text="${l.memberId}"></td> 
		                    	<td th:text="${l.bizNum}"></td> 
		                    	<td th:text="${l.bizFileAtt}"></td> 
		                    	<td th:text="${l.confirmId}"></td> 
		                    	<td th:text="${l.bizReTime}"></td> 
		                    	<td th:text="${l.statement.stateName}"></td> 
		                    	<td th:text="${l.bizCompTime}"></td>
		                    </tr>
	               		</tbody>
	            	</table>
	            	<button type="button" class="test sweet-prompt">test</button>
	        	</div>
			</div>
		</div>
	</div>
</div>
</th:block>


<th:block layout:fragment="customJsLib">
	<script th:src="@{/js/lib/sweetalert/sweetalert.min.js}"></script>
    <script th:src="@{/js/lib/sweetalert/sweetalert.init.js}"></script>
	<script th:src="@{/js/lib/datatables/datatables.min.js}"></script>
    <script th:src="@{/js/lib/datatables/cdn.datatables.net/buttons/1.2.2/js/dataTables.buttons.min.js}"></script>
    <script th:src="@{/js/lib/datatables/cdn.datatables.net/buttons/1.2.2/js/buttons.flash.min.js}"></script>
    <script th:src="@{/js/lib/datatables/datatables-init.js}"></script>
	<script type="text/javascript">
		$(function(){
		 $('.modiSelect').on('click',function(){
				var bizCode = $(this).attr("id");
	            console.log(bizCode,'bizCode');
	            
	            var request = $.ajax({
	    			  url: "/modifyBizConfirm", //요청 주소
	    			  method: "GET", //요청 방식
	    			  data: {"bizCode" : bizCode}, //전달 할 파라미터
	    			  dataType: "html" //받아 올 포맷방식
  				});
	          	//응답이 완료 되었을 경우 실행
				request.done(function( data ) {
				  console.log(data,"data");
				  
				 	/* var cform= '';
					
				  	cform += '<form th:action="@{#}">';
				  	cform += '<div class="form-group"><label>승인자</label><input type="text" class="form-control" id="confirmId" name="confirmId" th:value="${session.SID}"></div>';
				  	cform += '<div class="form-group"><label>승인상태</label><input type="text" class="form-control" id="bizStatus" name="bizStatus" value="state_store_cancle_com"></div>	';
				  	cform += '</form>';
				
					Swal.fire(cform);
					 */
					
				});
	          	//응답 실패
				request.fail(function(request,status,error){
			        alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
			    });
			}); 
			
		})
	</script>
</th:block>
</html>