<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="amdn.anywhere.mapper.MystoreMapper">

<resultMap type="Mystore" id="MystoreResultMap">
	<result property="storeCode"		column="store_code"></result>
	<result property="storeName"		column="store_name"></result>
	<result property="bizCode"			column="biz_code"></result>
	<result property="bizId"			column="biz_id"></result>
	<result property="storeLocation"	column="store_location"></result>
	<result property="storeTime"		column="store_time"></result>
	<result property="storePhone"		column="store_phone"></result>
	<result property="mainCateCode"		column="main_cate_code"></result>
	<result property="storeHoliday"		column="store_holiday"></result>
	<result property="storeTasteAgree"	column="store_taste_agree"></result>
	<result property="storeExposAgree"	column="store_expos_agree"></result>
	<result property="storePhoto"		column="store_photo"></result>
	<result property="storeTableNum"	column="store_table_num"></result>
	<result property="storeOccupancy"	column="store_occupancy"></result>
	<result property="menuName"			column="menu_name"></result>
	<result property="menuCode"			column="sales_item"></result>
	<result property="menuPrice"		column="sales_price"></result>
	<result property="month"			column="month_code"></result>
</resultMap>

<resultMap type="Mystore" id="MyStoreMap2">
	<result property="storeCode"		column="store_code"></result>
	<result property="expenseItem"		column="expense_item"></result>
	<result property="expenseDetail"		column="expense_detail"></result>
	<result property="expensePrice"		column="expense_price"></result>
</resultMap>
<select id="getMystore" resultType="Mystore">
      SELECT 
         store_name AS storeName
         ,store_phone AS storePhone
         ,store_code AS storeCode
         ,store_holiday AS storeHoliday
         ,biz_code AS bizCode
	     ,main_cate_code AS mainCateCode
         ,store_location AS storeLocation
         ,store_time AS storeTime
      FROM 
         tb_store_info;
   </select>
   
	<!-- <select id ="stCode" parameterType="String" resultMap="MystoreResultMap">
    SELECT
	    store_code
		store_name
		biz_code
		biz_id
		store_location
		store_time
		store_phone
		main_cate_code
		tore_holiday
		store_taste_agree
		store_expos_agree
		store_photo
		store_table_num
		store_occupancy
    FROM
    	tb_store_info
    WHERE
    	biz_id= #{bizId}
</select> -->

	<select id="getMystoreList" resultType="Mystore">
      SELECT 
         store_name AS storeName
         ,store_phone AS storePhone
         ,biz_code AS bizCode
	     ,main_cate_code AS mainCateCode
         ,store_code AS storeCode
         ,store_holiday AS storeHoliday
         ,store_location AS storeLocation
         ,store_time AS storeTime
      FROM 
         tb_store_info;
	</select>
	   
	   <select id="getMystoreRead" resultType="Mystore" parameterType="String">
	      SELECT 
	         store_name AS storeName
	         ,biz_code AS bizCode
	         ,main_cate_code AS mainCateCode
	         ,store_phone AS storePhone
	         ,store_code AS storeCode
	         ,store_holiday AS storeHoliday
	         ,store_location AS storeLocation
	         ,store_time AS storeTime
	      FROM 
	         tb_store_info
	      WHERE
	         store_name = #{storeName}
	   </select>
	   <select id="getMystoreSearch" resultMap="MystoreResultMap" parameterType="String">
			SELECT
				S.store_code, 
				M.menu_name,
				S.sales_item,
				S.sales_price,
				S.month_code
			FROM
				tb_store_info AS I
			INNER JOIN
				tb_store_menu AS M
			ON
				I.store_code = M.store_code
			INNER JOIN 
				tb_account_sales AS S
			ON
				I.store_code = S.store_code
			WHERE M.store_code = #{storeCode}
	   </select>
	   
	   <select id="getMystoreExpense" resultMap="MyStoreMap2" parameterType="String">
   		   	SELECT DISTINCT
				E.store_code,
				E.expense_item,
				E.expense_detail,
				E.expense_price
			FROM
				tb_account_expense AS E
			WHERE E.store_code = #{storeCode}
	   </select>

</mapper>